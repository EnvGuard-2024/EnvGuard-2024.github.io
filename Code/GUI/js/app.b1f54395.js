(function(){var t={6184:function(t,e){e.property=[]},1372:function(t,e){e.state={Light:[{value:"on",label:"on"},{value:"off",label:"off"}],AC:[{value:"on",label:"on"},{value:"off",label:"off"}],Window:[{value:"open",label:"open"},{value:"close",label:"close"}],Door:[{value:"open",label:"open"},{value:"close",label:"close"}],Fridge:[{value:"on",label:"on"},{value:"off",label:"off"}],CookerHood:[{value:"on",label:"on"},{value:"off",label:"off"}],Humidifier:[{value:"on",label:"on"},{value:"off",label:"off"}],AirPurifier:[{value:"on",label:"on"},{value:"off",label:"off"}],TV:[{value:"on",label:"on"},{value:"off",label:"off"}],Heater:[{value:"on",label:"on"},{value:"off",label:"off"}],Curtain:[{value:"open",label:"open"},{value:"close",label:"close"}],WaterDispenser:[{value:"on",label:"on"},{value:"off",label:"off"}],WaterHeater:[{value:"on",label:"on"},{value:"off",label:"off"}],MicrowaveOven:[{value:"on",label:"on"},{value:"off",label:"off"}],WashingMachine:[{value:"on",label:"on"},{value:"off",label:"off"}],Speaker:[{value:"on",label:"on"},{value:"off",label:"off"}],Temperature:[{value:"high",label:"high"},{value:"middle",label:"middle"},{value:"low",label:"low"}],Brightness:[{value:"high",label:"high"},{value:"middle",label:"middle"},{value:"low",label:"low"}],Humidity:[{value:"high",label:"high"},{value:"middle",label:"middle"},{value:"low",label:"low"}],Noise:[{value:"high",label:"high"},{value:"middle",label:"middle"},{value:"low",label:"low"}],AirQuality:[{value:"high",label:"high"},{value:"middle",label:"middle"},{value:"low",label:"low"}],HumanState:[{value:"detected",label:"detected"},{value:"undetected",label:"undetected"}],Weather:[{value:"sunny",label:"sunny"},{value:"cloudy",label:"cloudy"},{value:"raining",label:"raining"},{value:"snowy",label:"snowy"}]}},4557:function(t,e){e.time=[]},5417:function(t,e){e.url=[],e.dialog=!0},3951:function(t,e,a){"use strict";var s=a(144),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-container",attrs:{id:"app"}},[e("router-view")],1)},i=[],o=a(1001),n={},r=(0,o.Z)(n,l,i,!1,null,null,null),c=r.exports,p=a(8345),h=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"container"},[e("el-dialog",{attrs:{title:"CHOOSE ENVIRONMRNT",top:"10%",width:"40%",visible:t.enviromentDialogVisible,showClose:!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.enviromentDialogVisible=e}}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("el-button",{staticStyle:{padding:"30px","margin-bottom":"20px","font-size":"16pt",color:"white","background-color":"rgb(100, 195, 219)"},attrs:{plain:"",round:""},on:{click:function(e){return t.chooseEnvironment("Smart Office")}}},[t._v(" Smart Office ")])],1)],1),e("el-col",{attrs:{span:12}},[e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("el-button",{staticStyle:{padding:"30px","margin-bottom":"20px","font-size":"16pt",color:"white","background-color":"rgb(242, 185, 80)"},attrs:{plain:"",round:""},on:{click:function(e){return t.chooseEnvironment("Smart Home")}}},[t._v(" Smart Home ")])],1)],1)],1)],1),e("el-main",[e("h1",{staticClass:"home-title"},[t._v("Property Description")]),e("div",{staticStyle:{display:"flex","flex-direction":"row-reverse"}},[e("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("UPLOAD")])],1),e("el-dialog",{attrs:{title:"UPLOAD CONFIGURATION",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[e("el-form-item",{attrs:{label:"user name",prop:"user"}},[e("el-input",{attrs:{placeholder:"user name"},model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}})],1),e("el-form-item",{attrs:{label:"rule name",prop:"rule"}},[e("el-select",{attrs:{placeholder:"rule name",filterable:""},model:{value:t.form.rule,callback:function(e){t.$set(t.form,"rule",e)},expression:"form.rule"}},t._l(t.appOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.upload}},[t._v("Confirm")])],1)],1),t._l(t.propertyList,(function(a,s){return e("div",{key:s},[e("el-card",{staticClass:"card-margin"},[e("el-descriptions",{attrs:{title:"Property "+(s+1),column:1,border:""}},[e("template",{slot:"extra"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.updateItem(a,s)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeItem(s)}}})],1),e("el-descriptions-item",{attrs:{label:"Description"}},[t._v(t._s(a.description))]),e("el-descriptions-item",{attrs:{label:"Resolve Strategy"}},[t._v(t._s(a.strategy))])],2)],1)],1)})),e("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.addItem()}}},[e("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[t._v(" Add Property")])]),e("el-dialog",{attrs:{center:"",width:"85%",visible:t.templateDialog},on:{"update:visible":function(e){t.templateDialog=e},close:t.cancelAddItem}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{"border-radius":"10px",border:"2px solid rgb(130, 160, 180)",padding:"30px 10px","margin-right":"5px"}},[e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticClass:"space-title"},[t._v("Spatial State")])]),e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticClass:"template-spatial",on:{click:function(e){return t.confimAddItem("effect-effect")}}},[t._v(" Multiple ["),e("span",{staticStyle:{color:"rgb(43, 195, 219)","font-size":"15pt"}},[t._v("Effect")]),t._v("] should ["),e("span",{staticStyle:{color:"rgb(43, 195, 219)","font-size":"15pt"}},[t._v("Always/Never")]),t._v("] occur at the same time. ")])]),e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticClass:"template-spatial",on:{click:function(e){return t.confimAddItem("state-state")}}},[t._v(" Multiple ["),e("span",{staticStyle:{color:"rgb(43, 195, 219)","font-size":"15pt"}},[t._v("State")]),t._v("] should ["),e("span",{staticStyle:{color:"rgb(43, 195, 219)","font-size":"15pt"}},[t._v("Always/Never")]),t._v("] be active at the same time. ")])]),e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticClass:"template-spatial",on:{click:function(e){return t.confimAddItem("event-state")}}},[t._v("["),e("span",{staticStyle:{color:"rgb(43, 195, 219)","font-size":"15pt"}},[t._v("Event")]),t._v("] should ["),e("span",{staticStyle:{color:"rgb(43, 195, 219)","font-size":"15pt"}},[t._v("Always/Never")]),t._v("] happen while ["),e("span",{staticStyle:{color:"rgb(43, 195, 219)","font-size":"15pt"}},[t._v("State1, ..., Staten")]),t._v("].")])]),e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticClass:"template-spatial",on:{click:function(e){return t.confimAddItem("effect-state")}}},[t._v("["),e("span",{staticStyle:{color:"rgb(43, 195, 219)","font-size":"15pt"}},[t._v("Effect")]),t._v("] should ["),e("span",{staticStyle:{color:"rgb(43, 195, 219)","font-size":"15pt"}},[t._v("Always/Never")]),t._v("] happen while ["),e("span",{staticStyle:{color:"rgb(43, 195, 219)","font-size":"15pt"}},[t._v("State1, ..., Staten")]),t._v("].")])])],1)]),e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{"border-radius":"10px",border:"2px solid rgb(160, 180, 160)",padding:"30px 10px","margin-left":"5px"}},[e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticClass:"time-title"},[t._v("Temporal Trace")])]),e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticClass:"template-temporal",on:{click:function(e){return t.confimAddItem("event-state-time")}}},[t._v("The ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("State")]),t._v("] should ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("Always/Never")]),t._v("] occur within the ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("Time")]),t._v("] of the ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("Event")]),t._v("] occurrence. ")])]),e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticClass:"template-temporal",on:{click:function(e){return t.confimAddItem("effect-state-time")}}},[t._v("The ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("Effect")]),t._v("] should ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("Always/Never")]),t._v("] happen within the ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("Time")]),t._v("] while ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("State1, ..., Staten")]),t._v("]. ")])]),e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticClass:"template-temporal",on:{click:function(e){return t.confimAddItem("effect-time")}}},[t._v("The execution time of the ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("Effect")]),t._v("] must be ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("greater than/less than")]),t._v("] ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("Time")]),t._v("]. ")])]),e("el-row",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticClass:"template-temporal",on:{click:function(e){return t.confimAddItem("state-time")}}},[t._v("The duration of the ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("State")]),t._v("] must be ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("greater than/less than")]),t._v("] ["),e("span",{staticStyle:{color:"rgb(152, 210, 98)","font-size":"15pt"}},[t._v("Time")]),t._v("]. ")])])],1)])],1)],1)],1)],2)],1)},u=[];a(7658);const m=[{value:"Temperature regulation effect conflict",label:"Temperature regulation effect conflict"},{value:"Brightness regulation",label:"Brightness regulation"},{value:"Raining/Window conflict",label:"Raining/Window conflict"},{value:"Unsafe use of microwave oven",label:"Unsafe use of microwave oven"},{value:"Unsafe use of water dispenser",label:"Unsafe use of water dispenser"},{value:"Excessive humidity",label:"Excessive humidity"},{value:"Low air quality",label:"Low air quality"},{value:"Waste of electricity",label:"Waste of electricity"},{value:"Drinking fountains work too long",label:"Drinking fountains work too long"},{value:"Excessive noise",label:"Excessive noise"}],f=[{value:"Spatial State",label:"Spatial State",description:""},{value:"Temporal Trace",label:"Temporal Trace",description:""}],d=[{value:"Always",label:"Always"},{value:"Never",label:"Never"}],v=[{value:">",label:">"},{value:"<",label:"<"}],g=[{value:"event",label:"event"},{value:"action",label:"action"}],y=[{value:"Lab",label:"Lab"},{value:"Home",label:"Home"}],b=[{value:"Revoke",label:"Revoke"},{value:"Substitute",label:"Substitute"},{value:"Notify",label:"Notify"},{value:"Environment Adjust",label:"Environment Adjust"}];var T=a(6154),S={name:"HomeView",components:{},data(){return{enviroment:{enviroment:""},beginFlag:!1,propertyList:this.PROPERTY.property,form:{user:"",rule:""},rules:{user:[{required:!0,message:"please input your name.",trigger:"blur"}],rule:[{required:!0,message:"Please select the application name.",trigger:"blur"}]},enviromentDialogVisible:this.URL.dialog,dialogVisible:!1,templateDialog:!1,appOptions:m,categoryOptions:f,symbolOptions:v,enviromentOptions:y}},methods:{updateItem(t,e){if(t&&e>=0){const a=JSON.parse(JSON.stringify(t));switch(a.template){case"effect-effect":this.$router.push({name:"EffectEffect",params:{update:e,value:a.value}});break;case"effect-time":this.$router.push({name:"EffectTime",params:{update:e,value:a.value}});break;case"state-state":this.$router.push({name:"StateState",params:{update:e,value:a.value}});break;case"event-state":this.$router.push({name:"EventState",params:{update:e,value:a.value}});break;case"event-state-time":this.$router.push({name:"EventStateTime",params:{update:e,value:a.value}});break;case"state-time":this.$router.push({name:"StateTime",params:{update:e,value:a.value}});break;case"effect-state":this.$router.push({name:"EffectState",params:{update:e,value:a.value}});break;case"effect-state-time":this.$router.push({name:"EffectStateTime",params:{update:e,value:a.value}});break;default:break}}},removeItem(t){this.propertyList.splice(t,1),this.refresh()},addItem(){!1===this.beginFlag&&(this.beginFlag=!0,this.TIME.time=(new Date).getTime()),this.templateDialog=!0,this.update=-1},cancelAddItem(){this.templateDialog=!1,this.refresh()},chooseEnvironment(t){this.enviromentDialogVisible=!1,this.URL.dialog=!1,this.URL.url="Smart Office"===t?"labapi":"homeapi"},confimAddItem(t){switch(this.templateDialog=!1,t){case"effect-effect":this.$router.push({name:"EffectEffect",params:{update:-1,value:""}});break;case"effect-time":this.$router.push({name:"EffectTime",params:{update:-1,value:""}});break;case"state-state":this.$router.push({name:"StateState",params:{update:-1,value:""}});break;case"event-state":this.$router.push({name:"EventState",params:{update:-1,value:""}});break;case"event-state-time":this.$router.push({name:"EventStateTime",params:{update:-1,value:""}});break;case"state-time":this.$router.push({name:"StateTime",params:{update:-1,value:""}});break;case"effect-state":this.$router.push({name:"EffectState",params:{update:-1,value:""}});break;case"effect-state-time":this.$router.push({name:"EffectStateTime",params:{update:-1,value:""}});break}},refresh(){this.$forceUpdate()},upload(){this.beginFlag=!1;const t=this;if(this.propertyList.length<1)return this.$message.warning("There are no properties to upload!"),void(this.dialogVisible=!1);const e={};let a="";for(let s=0;s<this.propertyList.length;s++)e[s]=this.propertyList[s],"ltl"in this.propertyList[s]&&(a=""===a?this.propertyList[s].ltl:a+" | ("+this.propertyList[s].ltl+")");this.$refs.form.validate((a=>{a&&(t.dialogVisible=!1,(0,T.Z)({url:"/upload/saveByTemplate",method:"POST",data:{user:t.form.user,dsl:e,time:((new Date).getTime()-t.TIME.time)/1e3,rule:t.form.rule}}).then((e=>{t.PROPERTY.property=[],t.propertyList=[],t.form={user:"",rule:""},t.template={category:"",template:""}})))}))}},mounted(){}},_=S,C=(0,o.Z)(_,h,u,!1,null,"7c970989",null),x=C.exports,w=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"effect-effect-container"},[e("el-main",[e("h1",{staticClass:"title"},[t._v("Effect-Effect")]),e("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"20px"}},[e("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("CONFIRM")])],1),"Always"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"Multiple [effect] always occur at the same time.",type:"success",closable:!1}}):t._e(),"Never"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"Multiple [effect] never occur at the same time.",type:"success",closable:!1}}):t._e(),e("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:t.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"strategy",staticClass:"commit-form",attrs:{model:t.strategy,"label-width":"20%",rules:t.resolve_rule}},[e("el-form-item",{attrs:{label:"Resolve Strategy",prop:"resolve"}},[e("el-select",{attrs:{placeholder:"Please Choose the Resolve Strategy"},model:{value:t.strategy.resolve,callback:function(e){t.$set(t.strategy,"resolve",e)},expression:"strategy.resolve"}},t._l(t.resolveOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value,title:t.description}})})),1)],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.Confirm}},[t._v("Confirm")])],1)],1),e("el-row",{attrs:{gutter:5,type:"flex"}},[e("el-col",{attrs:{span:13}},[e("div",{staticClass:"effect-title",staticStyle:{"font-weight":"bold"}},[t._v(" Effect ")]),t._l(t.effectList,(function(a,s){return e("div",{key:s},[e("el-card",{staticClass:"card-margin"},[e("el-descriptions",{attrs:{title:"effect "+(s+1),column:1,border:""}},[e("template",{slot:"extra"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.updateItem(a,s)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeItem(s)}}})],1),e("el-descriptions-item",{attrs:{label:"location"}},[t._v(t._s(a.location))]),e("el-descriptions-item",{attrs:{label:"effect"}},[t._v(t._s(a.effect))])],2)],1)],1)})),e("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.addItem()}}},[e("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[t._v(" Add Effect")])]),e("el-dialog",{attrs:{title:"Effect",visible:t.chooseDialog},on:{"update:visible":function(e){t.chooseDialog=e},close:t.cancelAddItem}},[e("el-form",{ref:"effectTemplate",attrs:{model:t.effectTemplate,"label-width":"20%",rules:t.rules}},[e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:t.LocationChange},model:{value:t.effectTemplate.location,callback:function(e){t.$set(t.effectTemplate,"location",e)},expression:"effectTemplate.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"effect",prop:"effect"}},[e("el-select",{attrs:{placeholder:"Please Choose the Effect"},model:{value:t.effectTemplate.effect,callback:function(e){t.$set(t.effectTemplate,"effect",e)},expression:"effectTemplate.effect"}},t._l(t.effectsOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelAddItem}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confimAddItem}},[t._v("Confirm")])],1)],1)],1)],2),e("el-col",{staticClass:"desc",attrs:{span:5}},[e("div",{staticStyle:{"font-size":"15pt",width:"99%"}},[e("el-select",{staticClass:"radio",staticStyle:{width:"70%"},attrs:{placeholder:"Frequency"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.radioOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("el-col",{staticClass:"desc",attrs:{span:6}},[e("div",{staticStyle:{"font-size":"15pt","font-weight":"bold"}},[t._v(" occur at the same time ")])])],1)],1)],1)},O=[],k={name:"EffectEffect",components:{},data(){return{radio:"Always",resolveOptions:b,radioOptions:d,dialogVisible:!1,chooseDialog:!1,rules:{effect:[{required:!0,message:"please select the effect.",trigger:"blur"}],location:[{required:!0,message:"please select the location.",trigger:"blur"}]},strategy:{resolve:""},resolve_rule:{resolve:[{required:!0,message:"please select the resolve strategy",trigger:"blur"}]},effectList:[],effectTemplate:{effect:"",location:""},index:"",updateFlag:!1,effectsOptions:[],locationOptions:[]}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const t=this.$route.params.value.split(" & ");this.radio=t[2];for(let e=0;e<t.length-1;e++){const a=t[e].split(".");this.effectList.push({location:a[0],effect:a[1]})}}},methods:{updateItem(t,e){if(t&&e>=0){const a=JSON.parse(JSON.stringify(t));this.chooseDialog=!0,this.effectTemplate=a;const s=this;T.Z.get("/"+this.URL.url+"/effect_list/"+this.effectTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{s.effectsOptions=[];for(let e=0;e<t.data.length;e++)s.effectsOptions.push({value:t.data[e].slice(7,t.data[e].length),label:t.data[e].slice(7,t.data[e].length)})})).catch((t=>{console.log(t)})),this.index=e,this.updateFlag=!0}},removeItem(t){this.effectList.splice(t,1),this.refresh()},LocationChange(t){this.effectTemplate.effect=null;const e=this;T.Z.get("/"+this.URL.url+"/effect_list/"+t,{headers:{"Content-Type":"application/text"}}).then((t=>{this.effectsOptions=[];for(let a=0;a<t.data.length;a++)e.effectsOptions.push({value:t.data[a].slice(7,t.data[a].length),label:t.data[a].slice(7,t.data[a].length)})})).catch((t=>{console.log(t)}))},getLocation(){const t=this;this.locationOptions=[],T.Z.get("/"+this.URL.url+"/room_list",{headers:{"Content-Type":"application/text"}}).then((e=>{t.locationOptions=[];for(let a=0;a<e.data.length;a++)t.locationOptions.push({value:e.data[a],label:e.data[a]})})).catch((t=>{console.log(t)}))},Confirm(){if(this.effectList.length<2)return this.$message.warning("Please select more than two effects!"),void(this.dialogVisible=!1);this.$refs.strategy.validate((t=>{if(t){let t=this.effectList[0].location+"."+this.effectList[0].effect,e=this.effectList[0].location+"."+this.effectList[0].effect;for(let s=1;s<this.effectList.length;s++)t=t+" & "+this.effectList[s].location+"."+this.effectList[s].effect,e=e+" ， "+this.effectList[s].location+"."+this.effectList[s].effect;t=t+" & "+this.radio;const a=this.ltlMethod.getLTL(this.effectList,this.URL.url);a.then((a=>{let s=a.substring(3,a.length);s="Always"===this.radio?"G("+s+")":"F("+s+")",this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=t,this.PROPERTY.property[this.$route.params.update].strategy=this.strategy.resolve,this.PROPERTY.property[this.$route.params.update].description="[ "+e+" ] are [ "+this.radio+" ] occur simultaneously.",this.PROPERTY.property[this.$route.params.update].ltl=s):this.PROPERTY.property.push({template:"effect-effect",value:t,description:"[ "+e+" ] are [ "+this.radio+" ] occur simultaneously.",ltl:s,strategy:this.strategy.resolve}),this.$router.back()}))}else this.$message.warning("Please fill in the form correctly!")}))},addItem(){this.chooseDialog=!0,this.updateFlag=!1},cancelAddItem(){this.chooseDialog=!1,this.refresh()},confimAddItem(){this.$refs.effectTemplate.validate((t=>{t?(this.chooseDialog=!1,this.updateFlag?this.effectList[this.index]=this.effectTemplate:this.effectList.push(this.effectTemplate),this.cancelAddItem(),this.effectTemplate={effect:"",location:""}):this.$message.warning("Please fill in the form correctly!")}))},refresh(){this.$forceUpdate()}}},$=k,P=(0,o.Z)($,w,O,!1,null,null,null),E=P.exports,R=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"state-state-container"},[e("el-main",[e("h1",{staticClass:"home-title"},[t._v("State-State-Condition")]),e("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"20px"}},[e("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("CONFIRM")])],1),"Always"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[state1, ..., staten] should always be active at the same time.",type:"success",closable:!1}}):t._e(),"Never"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[state1, ..., staten] should never be active at the same time",type:"success",closable:!1}}):t._e(),e("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:t.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"strategy",staticClass:"commit-form",attrs:{model:t.strategy,"label-width":"20%",rules:t.resolve_rule}},[e("el-form-item",{attrs:{label:"Resolve Strategy",prop:"resolve"}},[e("el-select",{attrs:{placeholder:"Please Choose the Resolve Strategy"},model:{value:t.strategy.resolve,callback:function(e){t.$set(t.strategy,"resolve",e)},expression:"strategy.resolve"}},t._l(t.resolveOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value,title:t.description}})})),1)],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.Confirm}},[t._v("Confirm")])],1)],1),e("el-row",{attrs:{gutter:5,type:"flex"}},[e("el-col",{attrs:{span:13}},[t._l(t.states,(function(a,s){return e("div",{key:s},[e("el-card",{staticClass:"card-margin"},[e("el-descriptions",{attrs:{title:"State "+(s+1),column:1,border:""}},[e("template",{slot:"extra"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.updateItem(a,s)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeItem(s)}}})],1),e("el-descriptions-item",{attrs:{label:"location"}},[t._v(t._s(a.location))]),e("el-descriptions-item",{attrs:{label:"state"}},[t._v(t._s(a.category+"."+a.state+"."+a.value))])],2)],1)],1)})),e("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.addState()}}},[e("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[t._v(" Add State")])]),e("el-dialog",{attrs:{title:"State",visible:t.stateDialog},on:{"update:visible":function(e){t.stateDialog=e},close:t.cancelAddState}},[e("el-form",{ref:"statesTemplate",attrs:{model:t.statesTemplate,"label-width":"20%",rules:t.state_rules}},[e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:t.statesLocationChange},model:{value:t.statesTemplate.location,callback:function(e){t.$set(t.statesTemplate,"location",e)},expression:"statesTemplate.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"category",prop:"category"}},[e("el-select",{attrs:{placeholder:"Please Choose the Category"},on:{change:t.statesCategoryChange},model:{value:t.statesTemplate.category,callback:function(e){t.$set(t.statesTemplate,"category",e)},expression:"statesTemplate.category"}},[e("el-option",{attrs:{label:"device",value:"device"}}),e("el-option",{attrs:{label:"state",value:"state"}})],1)],1),e("el-form-item",{attrs:{label:"state",prop:"state"}},["device"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.devicesOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),"state"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.statesOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),e("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:t.statesTemplate.value,callback:function(e){t.$set(t.statesTemplate,"value",e)},expression:"statesTemplate.value"}},t._l(t.valuesOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelAddState}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confimAddState}},[t._v("Confirm")])],1)],1)],1)],2),e("el-col",{staticClass:"desc",attrs:{span:5}},[e("div",{staticStyle:{"font-size":"15pt",width:"99%"}},[e("el-select",{staticClass:"radio",staticStyle:{width:"70%"},attrs:{placeholder:"Frequency"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.radioOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("el-col",{staticClass:"desc",attrs:{span:6}},[e("div",{staticStyle:{"font-size":"15pt","font-weight":"bold"}},[t._v(" be active at the same time ")])])],1)],1)],1)},L=[],A={name:"StateState",components:{},data(){return{resolveOptions:b,radioOptions:d,dialogVisible:!1,stateDialog:!1,states:[],statesTemplate:{category:"",state:"",location:"",value:""},state_rules:{location:[{required:!0,message:"Please select the location.",trigger:"blur"}],category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"Please select the state.",trigger:"blur"}]},strategy:{resolve:""},resolve_rule:{resolve:[{required:!0,message:"please select the resolve strategy",trigger:"blur"}]},radio:"Always",locationOptions:[],statesOptions:[],devicesOptions:[],valuesOptions:[],index:"",updateFlag:!1}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const t=this.$route.params.value.split(" & ");this.radio=t[2];for(let e=0;e<t.length-1;e++){const a=t[e].split(".");this.states.push({location:a[0],category:a[1],state:a[2],value:a[3]})}}},methods:{updateItem(t,e){if(t&&e>=0){const a=JSON.parse(JSON.stringify(t));this.stateDialog=!0,this.statesTemplate=a,this.statesChange(this.statesTemplate.state),this.inquiryInfor(this.statesTemplate.category,"statesTemplate"),this.index=e,this.updateFlag=!0}},removeItem(t){this.states.splice(t,1),this.refresh()},getLocation(){const t=this;this.locationOptions=[],T.Z.get("/"+this.URL.url+"/room_list",{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.locationOptions.push({value:e.data[a],label:e.data[a]})})).catch((t=>{console.log(t)}))},Confirm(){if(this.states.length<2)return this.$message.warning("Please select more than two effects!"),void(this.dialogVisible=!1);this.$refs.strategy.validate((t=>{if(t){let t=this.states[0].location+"."+this.states[0].category+"."+this.states[0].state+"."+this.states[0].value,e=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value;for(let s=1;s<this.states.length;s++)t=t+" & "+this.states[s].location+"."+this.states[s].category+"."+this.states[s].state+"."+this.states[s].value,e=e+" , "+this.states[s].location+"."+this.states[s].state+"."+this.states[s].value;t=t+" & "+this.radio;let a="";a="Always"===this.radio?"G("+e+")":"F("+e+")",this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=t,this.PROPERTY.property[this.$route.params.update].strategy=this.strategy.resolve,this.PROPERTY.property[this.$route.params.update].description="[ "+e+" ] will [ "+this.radio+" ] happen simultaneously.",this.PROPERTY.property[this.$route.params.update].ltl=a):this.PROPERTY.property.push({template:"state-state",value:t,strategy:this.strategy.resolve,description:"[ "+e+" ] will [ "+this.radio+" ] happen simultaneously.",ltl:a}),this.dialogVisible=!1,this.$router.back()}else this.$message.warning("Please fill in the form correctly!")}))},inquiryInfor(t,e){const a=this;if("state"===e)"device"===t?(this.deviceOptions=[],T.Z.get("/"+this.URL.url+"/room_device/"+a.state.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let e=0;e<t.data.length;e++){const s=t.data[e].slice(0,-3);a.deviceOptions.push({value:s,label:s})}})).catch((t=>{console.log(t)}))):"state"===t&&(this.stateOptions=[],T.Z.get("/"+this.URL.url+"/room_state/"+a.state.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let e=0;e<t.data.length;e++)a.stateOptions.push({value:t.data[e],label:t.data[e]})})).catch((t=>{console.log(t)})));else if("statesTemplate"===e){const t=this;"device"===this.statesTemplate.category?(this.devicesOptions=[],T.Z.get("/"+this.URL.url+"/room_device/"+t.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++){const s=e.data[a].slice(0,-3);t.devicesOptions.push({value:s,label:s})}})).catch((t=>{console.log(t)}))):"state"===this.statesTemplate.category&&(this.statesOptions=[],T.Z.get("/"+this.URL.url+"/room_state/"+t.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.statesOptions.push({value:e.data[a],label:e.data[a]})})).catch((t=>{console.log(t)})))}},statesLocationChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(this.statesTemplate.category,"statesTemplate")},statesCategoryChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(t,"statesTemplate")},statesChange(t){this.statesTemplate.value=null,this.statesTemplate.state?this.valuesOptions=this.STATE.state[t]:this.valuesOptions=[]},addState(){this.stateDialog=!0,this.updateFlag=!1},cancelAddState(){this.stateDialog=!1,this.refresh()},confimAddState(){this.$refs.statesTemplate.validate((t=>{if(t){if(""===this.statesTemplate.value||null===this.statesTemplate.value)return void this.$message.warning("Please fill in the form correctly!");this.stateDialog=!1,this.updateFlag?this.states[this.index]=this.statesTemplate:this.states.push(this.statesTemplate),this.cancelAddState(),this.statesTemplate={category:"",state:"",value:""}}else this.$message.warning("Please fill in the form correctly!")}))},refresh(){this.$forceUpdate()}}},I=A,U=(0,o.Z)(I,R,L,!1,null,null,null),q=U.exports,V=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"event-state-container"},[e("el-main",[e("h1",{staticClass:"title"},[t._v("Event-State-Condition")]),e("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"20px"}},[e("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("CONFIRM")])],1),"Always"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[Event] should always happen while [state1, ..., staten].",type:"success",closable:!1}}):t._e(),"Never"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[Event] should never happen while [state1, ..., staten].",type:"success",closable:!1}}):t._e(),e("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:t.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"strategy",staticClass:"commit-form",attrs:{model:t.strategy,"label-width":"20%",rules:t.resolve_rule}},[e("el-form-item",{attrs:{label:"Resolve Strategy",prop:"resolve"}},[e("el-select",{attrs:{placeholder:"Please Choose the Resolve Strategy"},model:{value:t.strategy.resolve,callback:function(e){t.$set(t.strategy,"resolve",e)},expression:"strategy.resolve"}},t._l(t.resolveOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value,title:t.description}})})),1)],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.Confirm}},[t._v("Confirm")])],1)],1),e("el-row",{attrs:{gutter:5,type:"flex"}},[e("el-col",{attrs:{span:11}},[e("div",{staticClass:"state-title",staticStyle:{"font-weight":"bold"}},[t._v(" State ")]),t._l(t.states,(function(a,s){return e("div",{key:s},[e("el-card",{staticClass:"card-margin"},[e("el-descriptions",{attrs:{title:"State "+(s+1),column:1,border:""}},[e("template",{slot:"extra"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.updateItem(a,s)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeItem(s)}}})],1),e("el-descriptions-item",{attrs:{label:"location"}},[t._v(t._s(a.location))]),e("el-descriptions-item",{attrs:{label:"state"}},[t._v(t._s(a.category+"."+a.state+"."+a.value))])],2)],1)],1)})),e("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.addState()}}},[e("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[t._v(" Add State")])]),e("el-dialog",{attrs:{title:"State",visible:t.stateDialog},on:{"update:visible":function(e){t.stateDialog=e},close:t.cancelAddState}},[e("el-form",{ref:"statesTemplate",attrs:{model:t.statesTemplate,"label-width":"20%",rules:t.state_rules}},[e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:t.stateLocationChange},model:{value:t.statesTemplate.location,callback:function(e){t.$set(t.statesTemplate,"location",e)},expression:"statesTemplate.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"Category",prop:"category"}},[e("el-select",{attrs:{placeholder:"Please Choose the Category"},on:{change:t.stateCategoryChange},model:{value:t.statesTemplate.category,callback:function(e){t.$set(t.statesTemplate,"category",e)},expression:"statesTemplate.category"}},[e("el-option",{attrs:{label:"device",value:"device"}}),e("el-option",{attrs:{label:"state",value:"state"}})],1)],1),e("el-form-item",{attrs:{label:"State",prop:"state"}},["device"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.deviceOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),"state"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.stateOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),e("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:t.statesTemplate.value,callback:function(e){t.$set(t.statesTemplate,"value",e)},expression:"statesTemplate.value"}},t._l(t.valueOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelAddState}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confimAddState}},[t._v("Confirm")])],1)],1)],1)],2),e("el-col",{staticClass:"desc",attrs:{span:5}},[e("div",{staticStyle:{"font-size":"15pt",width:"99%"}},[e("el-select",{staticClass:"radio",staticStyle:{width:"70%"},attrs:{placeholder:"Frequency"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.radioOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("div",{staticStyle:{"margin-top":"10%","font-weight":"bold"}},[t._v(" happen while ")])],1)]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"event-title",staticStyle:{"font-weight":"bold"}},[t._v(" Event ")]),e("el-form",{ref:"eventTemplate",attrs:{model:t.eventTemplate,rules:t.event_rules}},[e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{staticStyle:{width:"70%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Location of the Event"},on:{change:t.eventLocationChange},model:{value:t.eventTemplate.location,callback:function(e){t.$set(t.eventTemplate,"location",e)},expression:"eventTemplate.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"Event",prop:"event"}},[e("el-select",{staticStyle:{width:"70%",float:"right","margin-bottom":"5px","margin-right":"10px"},attrs:{placeholder:"Please Choose the Type"},on:{change:t.typeChange},model:{value:t.eventTemplate.type,callback:function(e){t.$set(t.eventTemplate,"type",e)},expression:"eventTemplate.type"}},t._l(t.typeOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),"event"==t.eventTemplate.type?e("el-select",{staticStyle:{width:"70%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Event"},model:{value:t.eventTemplate.event,callback:function(e){t.$set(t.eventTemplate,"event",e)},expression:"eventTemplate.event"}},t._l(t.eventOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),"action"==t.eventTemplate.type?e("el-select",{staticStyle:{width:"70%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Action"},model:{value:t.eventTemplate.event,callback:function(e){t.$set(t.eventTemplate,"event",e)},expression:"eventTemplate.event"}},t._l(t.actionOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e()],1)],1)],1)],1)],1)],1)},D=[],z={name:"EventState",components:{},data(){return{radioOptions:d,resolveOptions:b,dialogVisible:!1,stateDialog:!1,eventTemplate:{type:"",event:"",location:""},states:[],statesTemplate:{category:"",state:"",value:"",location:""},state_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"Please select the state.",trigger:"blur"}]},event_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],event:[{required:!0,message:"please select the event.",trigger:"blur"}]},strategy:{resolve:""},resolve_rule:{resolve:[{required:!0,message:"please select the resolve strategy",trigger:"blur"}]},radio:"Always",stateOptions:[],typeOptions:g,deviceOptions:[],eventOptions:[],actionOptions:[],locationOptions:[],valueOptions:[],index:"",updateFlag:!1}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const t=this.$route.params.value.split(" & ");t[1]=t[1].substring(2),t[t.length-2]=t[t.length-2].substring(0,t[t.length-2].length-2);const e=t[0].split(".");this.radio=t[t.length-1],this.eventLocationChange(e[0]),this.eventTemplate={location:e[0],type:e[1],event:e[2]+"."+e[3]};for(let a=1;a<t.length-1;a++){const e=t[a].split(".");this.states.push({location:e[0],category:e[1],state:e[2],value:e[3]})}}},methods:{eventLocationChange(t){this.eventTemplate.event=null;const e=this;T.Z.get("/"+this.URL.url+"/event_list/"+t,{headers:{"Content-Type":"application/text"}}).then((t=>{this.eventOptions=[];for(let a=0;a<t.data.length;a++)e.eventOptions.push({value:t.data[a].slice(6,t.data[a].length),label:t.data[a].slice(6,t.data[a].length)})})).catch((t=>{console.log(t)})),T.Z.get("/"+this.URL.url+"/room_action/"+t,{headers:{"Content-Type":"application/text"}}).then((t=>{this.actionOptions=[];for(let a=0;a<t.data.length;a++)e.actionOptions.push({value:t.data[a],label:t.data[a]})})).catch((t=>{console.log(t)}))},typeChange(t){this.eventTemplate.event=null},updateItem(t,e){if(t&&e>=0){const a=JSON.parse(JSON.stringify(t));this.stateDialog=!0,this.statesTemplate=a,this.inquiryInfor(this.statesTemplate.category),this.statesChange(this.statesTemplate.state),this.index=e,this.updateFlag=!0}},removeItem(t){this.states.splice(t,1),this.refresh()},statesChange(t){this.statesTemplate.value=null,this.statesTemplate.state?this.valueOptions=this.STATE.state[t]:this.valueOptions=[]},getLocation(){const t=this;this.locationOptions=[],T.Z.get("/"+this.URL.url+"/room_list",{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.locationOptions.push({value:e.data[a],label:e.data[a]})})).catch((t=>{console.log(t)}))},Confirm(){this.$refs.eventTemplate.validate((t=>{this.$refs.strategy.validate((e=>{if(t)if(e){if(this.states.length<1)return this.$message.warning("Please fill in at least one state!"),void(this.dialogVisible=!1);let t=this.eventTemplate.location+"."+this.eventTemplate.type+"."+this.eventTemplate.event+" & [ "+this.states[0].location+"."+this.states[0].category+"."+this.states[0].state+"."+this.states[0].value,e=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value;for(let a=1;a<this.states.length;a++)t=t+" & "+this.states[a].location+"."+this.states[a].category+"."+this.states[a].state+"."+this.states[a].value,e=e+" , "+this.states[a].location+"."+this.states[a].state+"."+this.states[a].value;t=t+" ] & "+this.radio,this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=t,this.PROPERTY.property[this.$route.params.update].strategy=this.strategy.resolve,this.PROPERTY.property[this.$route.params.update].description="When [ "+e+" ] , [ "+this.eventTemplate.location+"."+this.eventTemplate.event+" ] will [ "+this.radio+" ] happen."):this.PROPERTY.property.push({template:"event-state",value:t,strategy:this.strategy.resolve,description:"When [ "+e+" ] , [ "+this.eventTemplate.location+"."+this.eventTemplate.event+" ] will [ "+this.radio+" ] happen."}),this.dialogVisible=!1,this.$router.back()}else this.$message.warning("Please fill in the form correctly!");else this.$message.warning("Please fill in the form correctly!"),this.dialogVisible=!1}))}))},inquiryInfor(t){const e=this;"device"===t?(this.deviceOptions=[],T.Z.get("/"+this.URL.url+"/room_device/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++){const s=t.data[a].slice(0,-3);e.deviceOptions.push({value:s,label:s})}})).catch((t=>{console.log(t)}))):"state"===t&&(this.stateOptions=[],T.Z.get("/"+this.URL.url+"/room_state/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.stateOptions.push({value:t.data[a],label:t.data[a]})})).catch((t=>{console.log(t)})))},stateLocationChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(this.statesTemplate.category)},stateCategoryChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(t)},addState(){this.stateDialog=!0,this.updateFlag=!1},cancelAddState(){this.stateDialog=!1,this.refresh()},confimAddState(){this.$refs.statesTemplate.validate((t=>{if(t){if(""===this.statesTemplate.value||null===this.statesTemplate.value)return void this.$message.warning("Please fill in the form correctly!");this.stateDialog=!1,this.updateFlag?this.states[this.index]=this.statesTemplate:this.states.push(this.statesTemplate),this.cancelAddState(),this.statesTemplate={category:"",state:"",location:"",value:""}}else this.$message.warning("Please fill in the form correctly!")}))},refresh(){this.$forceUpdate()}}},F=z,N=(0,o.Z)(F,V,D,!1,null,null,null),Z=N.exports,Y=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"effect-state-container"},[e("el-main",[e("h1",{staticClass:"home-title"},[t._v("State-Effect")]),e("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"20px"}},[e("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("CONFIRM")])],1),"Always"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[Effect] should always happen while [state1, ..., staten].",type:"success",closable:!1}}):t._e(),"Never"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"[Effect] should never happen while [state1, ..., staten].",type:"success",closable:!1}}):t._e(),e("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:t.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"strategy",staticClass:"commit-form",attrs:{model:t.strategy,"label-width":"20%",rules:t.resolve_rule}},[e("el-form-item",{attrs:{label:"Resolve Strategy",prop:"resolve"}},[e("el-select",{attrs:{placeholder:"Please Choose the Resolve Strategy"},model:{value:t.strategy.resolve,callback:function(e){t.$set(t.strategy,"resolve",e)},expression:"strategy.resolve"}},t._l(t.resolveOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value,title:t.description}})})),1)],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.Confirm}},[t._v("Confirm")])],1)],1),e("el-row",{attrs:{gutter:5,type:"flex"}},[e("el-col",{attrs:{span:11}},[e("div",{staticClass:"effect-title",staticStyle:{"font-weight":"bold"}},[t._v(" Effect ")]),e("el-form",{ref:"effectTemplate",attrs:{model:t.effectTemplate,"label-width":"10%",rules:t.effect_rules}},[e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{staticStyle:{width:"80%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Location"},on:{change:t.locationChange},model:{value:t.effectTemplate.location,callback:function(e){t.$set(t.effectTemplate,"location",e)},expression:"effectTemplate.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"effect",prop:"effect"}},[e("el-select",{staticStyle:{width:"80%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Effect"},model:{value:t.effectTemplate.effect,callback:function(e){t.$set(t.effectTemplate,"effect",e)},expression:"effectTemplate.effect"}},t._l(t.effectsOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),e("el-col",{staticClass:"desc",attrs:{span:5}},[e("div",{staticStyle:{"font-size":"15pt",width:"99%"}},[e("el-select",{staticClass:"radio",staticStyle:{width:"70%"},attrs:{placeholder:"Frequency"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.radioOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("div",{staticStyle:{"margin-top":"12%","font-weight":"bold"}},[t._v(" happen while ")])],1)]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"state-title",staticStyle:{"font-weight":"bold"}},[t._v(" State ")]),t._l(t.states,(function(a,s){return e("div",{key:s},[e("el-card",{staticClass:"card-margin"},[e("el-descriptions",{attrs:{title:"State "+(s+1),column:1,border:""}},[e("template",{slot:"extra"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.updateItem(a,s)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeItem(s)}}})],1),e("el-descriptions-item",{attrs:{label:"state"}},[t._v(t._s(a.location))]),e("el-descriptions-item",{attrs:{label:"state"}},[t._v(t._s(a.category+"."+a.state+"."+a.value))])],2)],1)],1)})),e("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.addState()}}},[e("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[t._v(" Add State")])]),e("el-dialog",{attrs:{title:"State",visible:t.stateDialog},on:{"update:visible":function(e){t.stateDialog=e},close:t.cancelAddState}},[e("el-form",{ref:"statesTemplate",attrs:{model:t.statesTemplate,"label-width":"20%",rules:t.state_rules}},[e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:t.stateLocationChange},model:{value:t.statesTemplate.location,callback:function(e){t.$set(t.statesTemplate,"location",e)},expression:"statesTemplate.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"category",prop:"category"}},[e("el-select",{attrs:{placeholder:"Please Choose the Category  "},on:{change:t.statesCategoryChange},model:{value:t.statesTemplate.category,callback:function(e){t.$set(t.statesTemplate,"category",e)},expression:"statesTemplate.category"}},[e("el-option",{attrs:{label:"device",value:"device"}}),e("el-option",{attrs:{label:"state",value:"state"}})],1)],1),e("el-form-item",{attrs:{label:"state",prop:"state"}},["device"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.deviceOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),"state"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.stateOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),e("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:t.statesTemplate.value,callback:function(e){t.$set(t.statesTemplate,"value",e)},expression:"statesTemplate.value"}},t._l(t.valueOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelAddState}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confimAddState}},[t._v("Confirm")])],1)],1)],1)],2)],1)],1)],1)},M=[],j={name:"EffectState",components:{},data(){return{radioOptions:d,resolveOptions:b,dialogVisible:!1,stateDialog:!1,effectTemplate:{effect:"",location:""},states:[],statesTemplate:{category:"",state:"",value:"",location:""},strategy:{resolve:""},resolve_rule:{resolve:[{required:!0,message:"please select the resolve strategy",trigger:"blur"}]},state_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"Please select the state.",trigger:"blur"}]},effect_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],effect:[{required:!0,message:"please select the effect.",trigger:"blur"}]},radio:"Always",stateOptions:[],deviceOptions:[],effectsOptions:[],locationOptions:[],valueOptions:[],index:"",updateFlag:!1}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const t=this.$route.params.value.split(" & ");t[1]=t[1].substring(2),t[t.length-2]=t[t.length-2].substring(0,t[t.length-2].length-2);const e=t[0].split(".");this.radio=t[t.length-1],this.locationChange(e[0]),this.effectTemplate={location:e[0],effect:e[1]};for(let a=1;a<t.length-1;a++){const e=t[a].split(".");this.states.push({location:e[0],category:e[1],state:e[2],value:e[3]})}}},methods:{updateItem(t,e){if(t&&e>=0){const a=JSON.parse(JSON.stringify(t));this.stateDialog=!0,this.statesTemplate=a,this.inquiryInfor(this.statesTemplate.category),this.statesChange(this.statesTemplate.state),this.index=e,this.updateFlag=!0}},removeItem(t){this.states.splice(t,1),this.refresh()},locationChange(t){this.effectTemplate.effect=null,this.effectsOptions=[];const e=this;T.Z.get("/"+this.URL.url+"/effect_list/"+t,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.effectsOptions.push({value:t.data[a].slice(7,t.data[a].length),label:t.data[a].slice(7,t.data[a].length)})})).catch((t=>{console.log(t)}))},stateLocationChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(this.statesTemplate.category)},statesChange(t){this.statesTemplate.value=null,this.statesTemplate.state?this.valueOptions=this.STATE.state[t]:this.valueOptions=[]},getLocation(){const t=this;this.locationOptions=[],T.Z.get("/"+this.URL.url+"/room_list",{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.locationOptions.push({value:e.data[a],label:e.data[a]})})).catch((t=>{console.log(t)}))},Confirm(){this.$refs.effectTemplate.validate((t=>{this.$refs.strategy.validate((e=>{if(t)if(e){if(this.states.length<1)return this.$message.warning("Please fill in at least one state!"),void(this.dialogVisible=!1);let t=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value,e=this.effectTemplate.location+"."+this.effectTemplate.effect+" & [ "+this.states[0].location+"."+this.states[0].category+"."+this.states[0].state+"."+this.states[0].value,a=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value;for(let l=1;l<this.states.length;l++)e=e+" & "+this.states[l].location+"."+this.states[l].category+"."+this.states[l].state+"."+this.states[l].value,a=a+" , "+this.states[l].location+"."+this.states[l].state+"."+this.states[l].value,t=t+" & "+this.states[l].location+"."+this.states[l].state+"."+this.states[l].value;e=e+" ] & "+this.radio;const s=this.ltlMethod.getLTL([this.effectTemplate],this.URL.url);s.then((s=>{let l=s.substring(3,s.length)+") & ("+t+")";l="Always"===this.radio?"G("+l+")":"F("+l+")",this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=e,this.PROPERTY.property[this.$route.params.update].strategy=this.strategy.resolve,this.PROPERTY.property[this.$route.params.update].description="When [ "+a+" ] , [ "+this.effectTemplate.location+"."+this.effectTemplate.effect+" ] will [ "+this.radio+" ] happen.",this.PROPERTY.property[this.$route.params.update].ltl=l):this.PROPERTY.property.push({template:"effect-state",value:e,description:"When [ "+a+" ] , [ "+this.effectTemplate.location+"."+this.effectTemplate.effect+" ] will [ "+this.radio+" ] happen.",ltl:l,strategy:this.strategy.resolve}),this.$router.back()}))}else this.$message.warning("Please fill in the form correctly!");else this.$message.warning("Please fill in the form correctly!"),this.dialogVisible=!1}))}))},inquiryInfor(t){const e=this;"device"===t?(this.deviceOptions=[],T.Z.get("/"+this.URL.url+"/room_device/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++){const s=t.data[a].slice(0,-3);e.deviceOptions.push({value:s,label:s})}})).catch((t=>{console.log(t)}))):"state"===t&&(this.stateOptions=[],T.Z.get("/"+this.URL.url+"/room_state/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.stateOptions.push({value:t.data[a],label:t.data[a]})})).catch((t=>{console.log(t)})))},statesCategoryChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(t)},addState(){this.stateDialog=!0,this.updateFlag=!1},cancelAddState(){this.stateDialog=!1,this.statesTemplate={category:"",state:"",value:"",location:""},this.refresh()},confimAddState(){this.$refs.statesTemplate.validate((t=>{if(t){if(""===this.statesTemplate.value||null===this.statesTemplate.value)return void this.$message.warning("Please fill in the form correctly!");this.stateDialog=!1,this.updateFlag?this.states[this.index]=this.statesTemplate:this.states.push(this.statesTemplate),this.cancelAddState(),this.statesTemplate={category:"",state:"",value:"",location:""}}else this.$message.warning("Please fill in the form correctly!")}))},refresh(){this.$forceUpdate()}}},J=j,H=(0,o.Z)(J,Y,M,!1,null,null,null),W=H.exports,B=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"effect-state-time-container"},[e("el-main",[e("h1",{staticClass:"title"},[t._v("State-Effect-Time")]),e("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"20px"}},[e("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("CONFIRM")])],1),"Always"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"The [Effect] always happen within the [Time] while [state1, ..., staten].",type:"success",closable:!1}}):t._e(),"Never"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{title:"The [Effect] never happen within the [Time] while [state1, ..., staten].",type:"success",closable:!1}}):t._e(),e("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:t.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"strategy",staticClass:"commit-form",attrs:{model:t.strategy,"label-width":"20%",rules:t.resolve_rule}},[e("el-form-item",{attrs:{label:"Resolve Strategy",prop:"resolve"}},[e("el-select",{attrs:{placeholder:"Please Choose the Resolve Strategy"},model:{value:t.strategy.resolve,callback:function(e){t.$set(t.strategy,"resolve",e)},expression:"strategy.resolve"}},t._l(t.resolveOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value,title:t.description}})})),1)],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.Confirm}},[t._v("Confirm")])],1)],1),e("el-row",{attrs:{gutter:5,type:"flex"}},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"effect-title",staticStyle:{"font-weight":"bold"}},[t._v(" Effect ")]),e("el-form",{ref:"effectTemplate",attrs:{model:t.effectTemplate,"label-width":"10%",rules:t.effect_rules}},[e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{staticStyle:{width:"80%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Location"},on:{change:t.locationChange},model:{value:t.effectTemplate.location,callback:function(e){t.$set(t.effectTemplate,"location",e)},expression:"effectTemplate.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"effect",prop:"effect"}},[e("el-select",{staticStyle:{width:"80%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Effect"},model:{value:t.effectTemplate.effect,callback:function(e){t.$set(t.effectTemplate,"effect",e)},expression:"effectTemplate.effect"}},t._l(t.effectsOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),e("el-col",{staticClass:"desc",attrs:{span:3}},[e("div",{staticStyle:{"font-size":"15pt",width:"99%"}},[e("el-select",{staticClass:"radio",staticStyle:{width:"70%"},attrs:{placeholder:"Frequency"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.radioOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("div",{staticStyle:{"margin-top":"12%","font-weight":"bold"}},[t._v(" happen within ")])],1)]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"time-title",staticStyle:{"font-weight":"bold"}},[t._v(" Time ")]),e("el-form",{ref:"timeTemplate",attrs:{model:t.timeTemplate,rules:t.time_rules}},[e("el-form-item",{attrs:{prop:"time"}},[e("span",[e("el-input-number",{staticStyle:{width:"25%","margin-right":"20px"},attrs:{"controls-position":"right",min:1},model:{value:t.timeTemplate.time,callback:function(e){t.$set(t.timeTemplate,"time",e)},expression:"timeTemplate.time"}})],1),e("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"Please Choose the Minimum Interval"},model:{value:t.timeTemplate.timeUnit,callback:function(e){t.$set(t.timeTemplate,"timeUnit",e)},expression:"timeTemplate.timeUnit"}},[e("el-option",{attrs:{label:"min",value:"min"}}),e("el-option",{attrs:{label:"hour",value:"hour"}}),e("el-option",{attrs:{label:"day",value:"day"}})],1)],1)],1)],1),e("el-col",{staticClass:"desc",staticStyle:{"font-weight":"bold","font-size":"15pt"},attrs:{span:2}},[t._v("while ")]),e("el-col",{attrs:{span:7}},[e("div",{staticClass:"state-title",staticStyle:{"font-weight":"bold"}},[t._v(" State ")]),t._l(t.states,(function(a,s){return e("div",{key:s},[e("el-card",{staticClass:"card-margin"},[e("el-descriptions",{attrs:{title:"State "+(s+1),column:1,border:""}},[e("template",{slot:"extra"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.updateItem(a,s)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeItem(s)}}})],1),e("el-descriptions-item",{attrs:{label:"location"}},[t._v(t._s(a.location))]),e("el-descriptions-item",{attrs:{label:"state"}},[t._v(t._s(a.category+"."+a.state+"."+a.value))])],2)],1)],1)})),e("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.addState()}}},[e("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[t._v(" Add State")])]),e("el-dialog",{attrs:{title:"State",visible:t.stateDialog},on:{"update:visible":function(e){t.stateDialog=e},close:t.cancelAddState}},[e("el-form",{ref:"statesTemplate",attrs:{model:t.statesTemplate,"label-width":"20%",rules:t.state_rules}},[e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:t.statesLocationChange},model:{value:t.statesTemplate.location,callback:function(e){t.$set(t.statesTemplate,"location",e)},expression:"statesTemplate.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"category",prop:"category"}},[e("el-select",{attrs:{placeholder:"Please Choose the Category"},on:{change:t.statesCategoryChange},model:{value:t.statesTemplate.category,callback:function(e){t.$set(t.statesTemplate,"category",e)},expression:"statesTemplate.category"}},[e("el-option",{attrs:{label:"device",value:"device"}}),e("el-option",{attrs:{label:"state",value:"state"}})],1)],1),e("el-form-item",{attrs:{label:"state",prop:"state"}},["device"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.deviceOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),"state"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.stateOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),e("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:t.statesTemplate.value,callback:function(e){t.$set(t.statesTemplate,"value",e)},expression:"statesTemplate.value"}},t._l(t.valuesOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelAddState}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confimAddState}},[t._v("Confirm")])],1)],1)],1)],2)],1)],1)],1)},G=[],Q={name:"StatetimeTemplate",components:{},data(){return{timeTemplate:{symbel:"",time:"",timeUnit:""},dialogVisible:!1,stateDialog:!1,effectTemplate:{effect:"",location:""},radioOptions:d,symbolOptions:v,states:[],statesTemplate:{category:"",state:"",value:"",location:""},time_rules:{time:[{required:!0,message:"please fill the execution time of effect.",trigger:"blur"}],timeUnit:[{required:!0,message:"please fill the execution timeUnit of effect.",trigger:"blur"}]},state_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"Please select the state.",trigger:"blur"}]},effect_rules:{location:[{required:!0,message:"please select the location.",trigger:"blur"}],effect:[{required:!0,message:"please select the effect.",trigger:"blur"}]},strategy:{resolve:""},resolve_rule:{resolve:[{required:!0,message:"please select the resolve strategy",trigger:"blur"}]},resolveOptions:b,radio:"Always",stateOptions:[],deviceOptions:[],effectsOptions:[],locationOptions:[],valuesOptions:[],index:"",updateFlag:!1}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const t=this.$route.params.value.split(" & ");t[1]=t[1].substring(2),t[t.length-3]=t[t.length-3].substring(0,t[t.length-3].length-2);const e=t[0].split(".");this.radio=t[t.length-2],this.locationChange(e[0]),this.effectTemplate={location:e[0],effect:e[1]},this.timeTemplate={time:parseInt(t[t.length-1]),timeUnit:/[^0-9]+/g.exec(t[t.length-1])[0]};for(let a=1;a<t.length-2;a++){const e=t[a].split(".");this.states.push({location:e[0],category:e[1],state:e[2],value:e[3]})}}},methods:{updateItem(t,e){if(t&&e>=0){const a=JSON.parse(JSON.stringify(t));this.stateDialog=!0,this.statesTemplate=a,this.inquiryInfor(this.statesTemplate.category),this.statesChange(this.statesTemplate.state),this.index=e,this.updateFlag=!0}},removeItem(t){this.states.splice(t,1),this.refresh()},locationChange(t){this.effectTemplate.effect=null,this.effectsOptions=[];const e=this;T.Z.get("/"+this.URL.url+"/effect_list/"+t,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.effectsOptions.push({value:t.data[a].slice(7,t.data[a].length),label:t.data[a].slice(7,t.data[a].length)})})).catch((t=>{console.log(t)}))},statesLocationChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(this.statesTemplate.category)},statesChange(t){this.statesTemplate.value=null,this.statesTemplate.state?this.valuesOptions=this.STATE.state[t]:this.valuesOptions=[]},getLocation(){const t=this;this.locationOptions=[],T.Z.get("/"+this.URL.url+"/room_list",{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.locationOptions.push({value:e.data[a],label:e.data[a]})})).catch((t=>{console.log(t)}))},Confirm(){this.$refs.effectTemplate.validate((t=>{this.$refs.timeTemplate.validate((e=>{this.$refs.strategy.validate((a=>{if(t&&e)if(a){if(""===this.timeTemplate.timeUnit)return this.$message.warning("Please fill in the form correctly!"),void(this.dialogVisible=!1);if(this.states.length<1)return this.$message.warning("Please fill in at least one state!"),void(this.dialogVisible=!1);let t=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value,e=this.effectTemplate.location+"."+this.effectTemplate.effect+" & [ "+this.states[0].location+"."+this.states[0].category+"."+this.states[0].state+"."+this.states[0].value,a=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value;for(let s=1;s<this.states.length;s++)e=e+" & "+this.states[s].location+"."+this.states[s].category+"."+this.states[s].state+"."+this.states[s].value,a=a+" , "+this.states[s].location+"."+this.states[s].state+"."+this.states[s].value,t=t+" & "+this.states[s].location+"."+this.states[s].state+"."+this.states[s].value;e=e+" ] & "+this.radio+" & "+this.timeTemplate.time+this.timeTemplate.timeUnit,this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=e,this.PROPERTY.property[this.$route.params.update].strategy=this.strategy.resolve,this.PROPERTY.property[this.$route.params.update].description="After ["+a+"], within  [ "+this.timeTemplate.time+this.timeTemplate.timeUnit+" ], [ "+this.effectTemplate.location+"."+this.effectTemplate.effect+" ] will [ "+this.radio+" ] happen."):this.PROPERTY.property.push({template:"effect-state-time",value:e,strategy:this.strategy.resolve,description:"After ["+a+"], within  [ "+this.timeTemplate.time+this.timeTemplate.timeUnit+" ], [ "+this.effectTemplate.location+"."+this.effectTemplate.effect+" ] will [ "+this.radio+" ] happen."}),this.$router.back()}else this.$message.warning("Please fill in the form correctly!");else this.$message.warning("Please fill in the form correctly!"),this.dialogVisible=!1}))}))}))},inquiryInfor(t){const e=this;"device"===t?(this.deviceOptions=[],T.Z.get("/"+this.URL.url+"/room_device/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++){const s=t.data[a].slice(0,-3);e.deviceOptions.push({value:s,label:s})}})).catch((t=>{console.log(t)}))):"state"===t&&(this.stateOptions=[],T.Z.get("/"+this.URL.url+"/room_state/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.stateOptions.push({value:t.data[a],label:t.data[a]})})).catch((t=>{console.log(t)})))},statesCategoryChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(t)},addState(){this.stateDialog=!0,this.updateFlag=!1},cancelAddState(){this.stateDialog=!1,this.statesTemplate={category:"",state:"",value:"",location:""},this.refresh()},confimAddState(){this.$refs.statesTemplate.validate((t=>{if(t){if(""===this.statesTemplate.value||null===this.statesTemplate.value)return void this.$message.warning("Please fill in the form correctly!");this.stateDialog=!1,this.updateFlag?this.states[this.index]=this.statesTemplate:this.states.push(this.statesTemplate),this.cancelAddState(),this.statesTemplate={category:"",state:"",value:"",location:""}}else this.$message.warning("Please fill in the form correctly!")}))},refresh(){this.$forceUpdate()}}},K=Q,X=(0,o.Z)(K,B,G,!1,null,null,null),tt=X.exports,et=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"effect-time-container"},[e("el-main",[e("h1",{staticClass:"home-title"},[t._v("Effect-Time")]),e("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"10px"}},[e("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("CONFIRM")])],1),e("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:t.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"strategy",staticClass:"commit-form",attrs:{model:t.strategy,"label-width":"20%",rules:t.resolve_rule}},[e("el-form-item",{attrs:{label:"Resolve Strategy",prop:"resolve"}},[e("el-select",{attrs:{placeholder:"Please Choose the Resolve Strategy"},model:{value:t.strategy.resolve,callback:function(e){t.$set(t.strategy,"resolve",e)},expression:"strategy.resolve"}},t._l(t.resolveOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value,title:t.description}})})),1)],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.Confirm}},[t._v("Confirm")])],1)],1),e("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"The execution time of the [Effect] must be [greater than/less than] [Time].",type:"success",closable:!1}}),e("el-form",{ref:"EffectTime",attrs:{model:t.EffectTime,"label-width":"20%",rules:t.effect_time_rule}},[e("el-row",{attrs:{gutter:5,type:"flex"}},[e("el-col",{attrs:{span:9}},[e("div",{staticClass:"effect-title",staticStyle:{"font-weight":"bold"}},[t._v(" Effect ")]),e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{staticStyle:{width:"90%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Location"},on:{change:t.LocationChange},model:{value:t.EffectTime.location,callback:function(e){t.$set(t.EffectTime,"location",e)},expression:"EffectTime.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"Effect",prop:"effect"}},[e("el-select",{staticStyle:{width:"90%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Effect"},model:{value:t.EffectTime.effect,callback:function(e){t.$set(t.EffectTime,"effect",e)},expression:"EffectTime.effect"}},t._l(t.effectsOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("el-col",{staticClass:"desc",attrs:{span:6}},[e("div",{staticStyle:{"font-size":"15pt",width:"50%"}},[e("div",{staticStyle:{"font-weight":"bold"}},[t._v(" Must Execute ")]),e("el-form-item",{staticClass:"symbol",attrs:{"label-width":"0",prop:"symbol"}},[e("el-select",{staticStyle:{width:"90%","margin-right":"10px","margin-top":"10%"},attrs:{placeholder:"Symbol"},model:{value:t.EffectTime.symbol,callback:function(e){t.$set(t.EffectTime,"symbol",e)},expression:"EffectTime.symbol"}},t._l(t.symbolOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)]),e("el-col",{attrs:{span:9}},[e("div",{staticClass:"time-title",staticStyle:{"font-weight":"bold"}},[t._v(" Time ")]),e("el-form-item",{attrs:{"label-width":"0",prop:"time"}},[e("span",[e("el-input-number",{staticStyle:{width:"20%","margin-right":"5%"},attrs:{"controls-position":"right",min:1},model:{value:t.EffectTime.time,callback:function(e){t.$set(t.EffectTime,"time",e)},expression:"EffectTime.time"}})],1),e("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"Minimum/Maximum Execution Time"},model:{value:t.EffectTime.timeUnit,callback:function(e){t.$set(t.EffectTime,"timeUnit",e)},expression:"EffectTime.timeUnit"}},[e("el-option",{attrs:{label:"min",value:"min"}}),e("el-option",{attrs:{label:"hour",value:"hour"}}),e("el-option",{attrs:{label:"day",value:"day"}})],1)],1)],1)],1)],1)],1)],1)},at=[],st={methods:{getLocation(){const t=this;this.locationOptions=[],T.Z.get("/"+this.URL.url+"/room_list",{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.locationOptions.push({value:e.data[a],label:e.data[a]})})).catch((t=>{console.log(t)}))},Confirm(){this.$refs.EffectTime.validate((t=>{this.$refs.strategy.validate((e=>{if(t)if(e){if(""===this.EffectTime.timeUnit)return this.$message.warning("Please fill in the form correctly!"),void(this.dialogVisible=!1);this.EffectTimeDialog=!1;const t=this.EffectTime.location+"."+this.EffectTime.effect+" & "+this.EffectTime.symbol+" & "+this.EffectTime.time+this.EffectTime.timeUnit;this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=t,this.PROPERTY.property[this.$route.params.update].strategy=this.strategy.resolve,this.PROPERTY.property[this.$route.params.update].description="The duration of [ "+this.EffectTime.location+"."+this.EffectTime.effect+" ] must [ "+this.EffectTime.symbol+" "+this.EffectTime.time+this.EffectTime.timeUnit+" ]"):this.PROPERTY.property.push({template:"effect-time",value:t,strategy:this.strategy.resolve,description:"The duration of [ "+this.EffectTime.location+"."+this.EffectTime.effect+" ] must [ "+this.EffectTime.symbol+" "+this.EffectTime.time+this.EffectTime.timeUnit+" ]"}),this.$router.back()}else this.$message.warning("Please fill in the form correctly!");else this.$message.warning("Please fill in the form correctly!"),this.dialogVisible=!1}))}))},LocationChange(t){this.EffectTime.effect=null,this.effectsOptions=[];const e=this;T.Z.get("/"+this.URL.url+"/effect_list/"+t,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.effectsOptions.push({value:t.data[a].slice(7,t.data[a].length),label:t.data[a].slice(7,t.data[a].length)})})).catch((t=>{console.log(t)}))}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const t=this.$route.params.value.split(" & ");t[0]=t[0].split("."),this.LocationChange(t[0][0]),this.EffectTime={location:t[0][0],effect:t[0][1],symbol:t[1],time:parseInt(t[2]),timeUnit:/[^0-9]+/g.exec(t[2])[0]}}},data(){return{resolveOptions:b,dialogVisible:!1,EffectTimeDialog:!1,symbolOptions:v,locationOptions:[],effectsOptions:[],EffectTime:{effect:"",location:"",symbol:"",time:"",timeUnit:""},strategy:{resolve:""},resolve_rule:{resolve:[{required:!0,message:"please select the resolve strategy",trigger:"blur"}]},effect_time_rule:{effect:[{required:!0,message:"please select the effect.",trigger:"blur"}],location:[{required:!0,message:"please select the location.",trigger:"blur"}],symbol:[{required:!0,message:"please select the symbol.",trigger:"blur"}],time:[{required:!0,message:"please fill the execution time of effect.",trigger:"blur"}]}}}},lt=st,it=(0,o.Z)(lt,et,at,!1,null,null,null),ot=it.exports,nt=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"event-state-time-container"},[e("el-main",{staticStyle:{padding:"20px 15px"}},[e("h1",{staticClass:"title"},[t._v("Event-State-Time")]),e("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"15px"}},[e("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"8px"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("CONFIRM")])],1),e("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:t.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"strategy",staticClass:"commit-form",attrs:{model:t.strategy,"label-width":"20%",rules:t.resolve_rule}},[e("el-form-item",{attrs:{label:"Resolve Strategy",prop:"resolve"}},[e("el-select",{attrs:{placeholder:"Please Choose the Resolve Strategy"},model:{value:t.strategy.resolve,callback:function(e){t.$set(t.strategy,"resolve",e)},expression:"strategy.resolve"}},t._l(t.resolveOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value,title:t.description}})})),1)],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.Confirm}},[t._v("Confirm")])],1)],1),"Always"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{title:"The [State] always occur within the [Time] of the [Event] occurrence.",type:"success",closable:!1}}):t._e(),"Never"==t.radio?e("el-alert",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{title:"The [State] never occur within the [Time] of the [Event] occurrence.",type:"success",closable:!1}}):t._e(),e("el-row",{attrs:{gutter:5,type:"flex"}},[e("el-col",{attrs:{span:7}},[e("div",{staticClass:"state-title",staticStyle:{"font-weight":"bold"}},[t._v(" State ")]),t._l(t.states,(function(a,s){return e("div",{key:s},[e("el-card",{staticClass:"card-margin"},[e("el-descriptions",{attrs:{title:"State "+(s+1),column:1,border:""}},[e("template",{slot:"extra"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.updateItem(a,s)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeItem(s)}}})],1),e("el-descriptions-item",{attrs:{label:"location"}},[t._v(t._s(a.location))]),e("el-descriptions-item",{attrs:{label:"state"}},[t._v(t._s(a.category+"."+a.state+"."+a.value))])],2)],1)],1)})),e("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.addState()}}},[e("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[t._v(" Add State")])]),e("el-dialog",{attrs:{title:"State",visible:t.stateDialog},on:{"update:visible":function(e){t.stateDialog=e},close:t.cancelAddState}},[e("el-form",{ref:"statesTemplate",attrs:{model:t.statesTemplate,"label-width":"20%",rules:t.state_rules}},[e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:t.statesLocationChange},model:{value:t.statesTemplate.location,callback:function(e){t.$set(t.statesTemplate,"location",e)},expression:"statesTemplate.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"category",prop:"category"}},[e("el-select",{attrs:{placeholder:"Please Choose the Category"},on:{change:t.statesCategoryChange},model:{value:t.statesTemplate.category,callback:function(e){t.$set(t.statesTemplate,"category",e)},expression:"statesTemplate.category"}},[e("el-option",{attrs:{label:"device",value:"device"}}),e("el-option",{attrs:{label:"state",value:"state"}})],1)],1),e("el-form-item",{attrs:{label:"state",prop:"state"}},["device"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.deviceOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),"state"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.stateOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),e("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:t.statesTemplate.value,callback:function(e){t.$set(t.statesTemplate,"value",e)},expression:"statesTemplate.value"}},t._l(t.valuesOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelAddState}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confimAddState}},[t._v("Confirm")])],1)],1)],1)],2),e("el-col",{staticClass:"desc",attrs:{span:3}},[e("div",{staticStyle:{"font-size":"15pt",width:"99%"}},[e("el-select",{staticClass:"radio",staticStyle:{width:"70%"},attrs:{placeholder:"Frequency"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.radioOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("div",{staticStyle:{"margin-top":"12%","font-weight":"bold"}},[t._v(" occur within ")])],1)]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"time-title",staticStyle:{"font-weight":"bold"}},[t._v(" Time ")]),e("el-form",{ref:"timeTemplate",attrs:{model:t.timeTemplate,rules:t.time_rules}},[e("el-form-item",{attrs:{prop:"time"}},[e("span",[e("el-input-number",{staticStyle:{width:"25%","margin-right":"20px"},attrs:{"controls-position":"right",min:1},model:{value:t.timeTemplate.time,callback:function(e){t.$set(t.timeTemplate,"time",e)},expression:"timeTemplate.time"}})],1),e("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"Please Choose the Minimum Interval"},model:{value:t.timeTemplate.timeUnit,callback:function(e){t.$set(t.timeTemplate,"timeUnit",e)},expression:"timeTemplate.timeUnit"}},[e("el-option",{attrs:{label:"min",value:"min"}}),e("el-option",{attrs:{label:"hour",value:"hour"}}),e("el-option",{attrs:{label:"day",value:"day"}})],1)],1)],1)],1),e("el-col",{staticClass:"desc",staticStyle:{"font-weight":"bold","font-size":"15pt"},attrs:{span:2}},[t._v("after ")]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"event-title",staticStyle:{"font-weight":"bold"}},[t._v(" Event ")]),e("el-form",{ref:"eventTemplate",attrs:{model:t.eventTemplate,rules:t.event_rules}},[e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{staticStyle:{width:"70%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Location of the Event"},on:{change:t.eventLocationChange},model:{value:t.eventTemplate.location,callback:function(e){t.$set(t.eventTemplate,"location",e)},expression:"eventTemplate.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"Event",prop:"event"}},[e("el-select",{staticStyle:{width:"70%",float:"right","margin-bottom":"5px","margin-right":"10px"},attrs:{placeholder:"Please Choose the Type"},on:{change:t.typeChange},model:{value:t.eventTemplate.type,callback:function(e){t.$set(t.eventTemplate,"type",e)},expression:"eventTemplate.type"}},t._l(t.typeOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),"event"==t.eventTemplate.type?e("el-select",{staticStyle:{width:"70%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Event"},model:{value:t.eventTemplate.event,callback:function(e){t.$set(t.eventTemplate,"event",e)},expression:"eventTemplate.event"}},t._l(t.eventOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),"action"==t.eventTemplate.type?e("el-select",{staticStyle:{width:"70%",float:"right","margin-right":"10px"},attrs:{placeholder:"Please Choose the Action"},model:{value:t.eventTemplate.event,callback:function(e){t.$set(t.eventTemplate,"event",e)},expression:"eventTemplate.event"}},t._l(t.actionOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e()],1)],1)],1)],1)],1)],1)},rt=[],ct={methods:{refresh(){this.$forceUpdate()},addState(){this.stateDialog=!0,this.updateFlag=!1},updateItem(t,e){if(t&&e>=0){const a=JSON.parse(JSON.stringify(t));this.stateDialog=!0,this.statesTemplate=a,this.inquiryInfor(this.statesTemplate.category),this.statesChange(this.statesTemplate.state),this.index=e,this.updateFlag=!0}},removeItem(t){this.states.splice(t,1),this.refresh()},statesChange(t){this.statesTemplate.value=null,this.statesTemplate.state?this.valuesOptions=this.STATE.state[t]:this.valuesOptions=[]},cancelAddState(){this.stateDialog=!1,this.refresh()},confimAddState(){this.$refs.statesTemplate.validate((t=>{if(t){if(""===this.statesTemplate.value||null===this.statesTemplate.value)return void this.$message.warning("Please fill in the form correctly!");this.stateDialog=!1,this.updateFlag?this.states[this.index]=this.statesTemplate:this.states.push(this.statesTemplate),this.cancelAddState(),this.statesTemplate={category:"",state:"",value:""}}else this.$message.warning("Please fill in the form correctly!")}))},eventLocationChange(t){this.eventTemplate.event=null;const e=this;T.Z.get("/"+this.URL.url+"/event_list/"+t,{headers:{"Content-Type":"application/text"}}).then((t=>{this.eventOptions=[];for(let a=0;a<t.data.length;a++)e.eventOptions.push({value:t.data[a].slice(6,t.data[a].length),label:t.data[a].slice(6,t.data[a].length)})})).catch((t=>{console.log(t)})),T.Z.get("/"+this.URL.url+"/room_action/"+t,{headers:{"Content-Type":"application/text"}}).then((t=>{this.actionOptions=[];for(let a=0;a<t.data.length;a++)e.actionOptions.push({value:t.data[a],label:t.data[a]})})).catch((t=>{console.log(t)}))},typeChange(t){this.eventTemplate.event=null},getLocation(){const t=this;T.Z.get("/"+this.URL.url+"/room_list",{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.locationOptions.push({value:e.data[a],label:e.data[a]})})).catch((t=>{console.log(t)}))},statesLocationChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(this.statesTemplate.category)},statesCategoryChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(t)},inquiryInfor(t){const e=this;"device"===t?(this.deviceOptions=[],T.Z.get("/"+this.URL.url+"/room_device/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++){const s=t.data[a].slice(0,-3);e.deviceOptions.push({value:s,label:s})}})).catch((t=>{console.log(t)}))):"state"===t&&(this.stateOptions=[],T.Z.get("/"+this.URL.url+"/room_state/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.stateOptions.push({value:t.data[a],label:t.data[a]})})).catch((t=>{console.log(t)})))},Confirm(){this.$refs.eventTemplate.validate((t=>{this.$refs.timeTemplate.validate((e=>{this.$refs.strategy.validate((a=>{if(t&&e)if(a){if(""===this.timeTemplate.timeUnit||""===this.eventTemplate.event||null===this.eventTemplate.event||void 0===this.eventTemplate.event)return this.$message.warning("Please fill in the form correctly!"),void(this.dialogVisible=!1);if(this.states.length<1)return this.$message.warning("Please fill in at least one state!"),void(this.dialogVisible=!1);let t=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value,e=this.eventTemplate.location+"."+this.eventTemplate.type+"."+this.eventTemplate.event+" & [ "+this.states[0].location+"."+this.states[0].category+"."+this.states[0].state+"."+this.states[0].value,a=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value;for(let s=1;s<this.states.length;s++)e=e+" & "+this.states[s].location+"."+this.states[s].category+"."+this.states[s].state+"."+this.states[s].value,a=a+" , "+this.states[s].location+"."+this.states[s].state+"."+this.states[s].value,t=t+" & "+this.states[s].location+"."+this.states[s].state+"."+this.states[s].value;e=e+" ] & "+this.radio+" & "+this.timeTemplate.time+this.timeTemplate.timeUnit,this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=e,this.PROPERTY.property[this.$route.params.update].strategy=this.strategy.resolve,this.PROPERTY.property[this.$route.params.update].description="After ["+a+"], within  [ "+this.timeTemplate.time+this.timeTemplate.timeUnit+" ], [ "+this.eventTemplate.location+"."+this.eventTemplate.event+" ] will [ "+this.radio+" ] happen."):this.PROPERTY.property.push({template:"event-state-time",value:e,strategy:this.strategy.resolve,description:"After ["+this.eventTemplate.location+"."+this.eventTemplate.event+"], within  [ "+this.timeTemplate.time+this.timeTemplate.timeUnit+" ], [ "+a+" ] will [ "+this.radio+" ] happen."}),this.$router.back()}else this.$message.warning("Please fill in the form correctly!");else this.$message.warning("Please fill in the form correctly!"),this.dialogVisible=!1}))}))}))}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const t=this.$route.params.value.split(" & ");t[1]=t[1].substring(2),t[t.length-3]=t[t.length-3].substring(0,t[t.length-3].length-2);const e=t[0].split(".");this.radio=t[t.length-2],this.eventLocationChange(e[0]),this.eventTemplate={location:e[0],type:e[1],event:e[2]+"."+e[3]},this.timeTemplate={time:parseInt(t[t.length-1]),timeUnit:/[^0-9]+/g.exec(t[t.length-1])[0]};for(let a=1;a<t.length-2;a++){const e=t[a].split(".");this.states.push({location:e[0],category:e[1],state:e[2],value:e[3]})}}},data(){return{stateDialog:!1,radio:"Always",resolveOptions:b,radioOptions:d,locationOptions:[],eventOptions:[],eventOptionsTwo:[],valuesOptions:[],actionOptions:[],stateOptions:[],deviceOptions:[],typeOptions:g,symbolOptions:v,dialogVisible:!1,EventStateTimeDialog:!1,eventTemplate:{location:"",type:"",event:""},timeTemplate:{time:"",timeUnit:""},state:{category:"",state:"",location:"",value:""},statesTemplate:{category:"",state:"",location:"",value:""},states:[],state_rules:{location:[{required:!0,message:"Please select the location.",trigger:"blur"}],type:[{required:!0,message:"please select the type.",trigger:"blur"}],event:[{required:!0,message:"Please select the event.",trigger:"blur"}]},event_rules:{location:[{required:!0,message:"Please select the location.",trigger:"blur"}],category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"Please select the state.",trigger:"blur"}]},time_rules:{time:[{required:!0,message:"please select the min time time between event and state.",trigger:"blur"}],timeUnit:[{required:!0,message:"please fill the execution timeUnit of event.",trigger:"blur"}]},strategy:{resolve:""},resolve_rule:{resolve:[{required:!0,message:"please select the resolve strategy",trigger:"blur"}]}}}},pt=ct,ht=(0,o.Z)(pt,nt,rt,!1,null,null,null),ut=ht.exports,mt=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"state-time-container"},[e("el-main",[e("h1",{staticClass:"title"},[t._v("State-Time")]),e("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-top":"20px"}},[e("el-button",{staticStyle:{"margin-right":"30px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("CONFIRM")])],1),e("el-dialog",{attrs:{title:"CONFIRM PROPERTY",visible:t.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"strategy",staticClass:"commit-form",attrs:{model:t.strategy,"label-width":"20%",rules:t.resolve_rule}},[e("el-form-item",{attrs:{label:"Resolve Strategy",prop:"resolve"}},[e("el-select",{attrs:{placeholder:"Please Choose the Resolve Strategy"},model:{value:t.strategy.resolve,callback:function(e){t.$set(t.strategy,"resolve",e)},expression:"strategy.resolve"}},t._l(t.resolveOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value,title:t.description}})})),1)],1)],1),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.Confirm}},[t._v("Confirm")])],1)],1),e("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{title:"The duration of the [State] must be [greater than/less than] [Time].",type:"success",closable:!1}}),e("el-form",{ref:"StateTime",attrs:{model:t.StateTime,"label-width":"20%",rules:t.state_time_rule}},[e("el-row",{attrs:{gutter:5,type:"flex"}},[e("el-col",{attrs:{span:9}},[e("div",{staticClass:"state-title",staticStyle:{"font-weight":"bold"}},[t._v(" State ")]),t._l(t.states,(function(a,s){return e("div",{key:s},[e("el-card",{staticClass:"card-margin"},[e("el-descriptions",{attrs:{title:"State "+(s+1),column:1,border:""}},[e("template",{slot:"extra"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.updateItem(a,s)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeItem(s)}}})],1),e("el-descriptions-item",{attrs:{label:"location"}},[t._v(t._s(a.location))]),e("el-descriptions-item",{attrs:{label:"state"}},[t._v(t._s(a.category+"."+a.state+"."+a.value))])],2)],1)],1)})),e("el-card",{staticClass:"card-margin",staticStyle:{display:"flex","align-content":"center","justify-content":"center"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.addState()}}},[e("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"25px"}},[t._v(" Add State")])]),e("el-dialog",{attrs:{title:"State",visible:t.stateDialog},on:{"update:visible":function(e){t.stateDialog=e},close:t.cancelAddState}},[e("el-form",{ref:"statesTemplate",attrs:{model:t.statesTemplate,"label-width":"20%",rules:t.state_rules}},[e("el-form-item",{attrs:{label:"Location",prop:"location"}},[e("el-select",{attrs:{placeholder:"Please Choose the Location"},on:{change:t.statesLocationChange},model:{value:t.statesTemplate.location,callback:function(e){t.$set(t.statesTemplate,"location",e)},expression:"statesTemplate.location"}},t._l(t.locationOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"category",prop:"category"}},[e("el-select",{attrs:{placeholder:"Please Choose the Category"},on:{change:t.statesCategoryChange},model:{value:t.statesTemplate.category,callback:function(e){t.$set(t.statesTemplate,"category",e)},expression:"statesTemplate.category"}},[e("el-option",{attrs:{label:"device",value:"device"}}),e("el-option",{attrs:{label:"state",value:"state"}})],1)],1),e("el-form-item",{attrs:{label:"state",prop:"state"}},["device"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the Device"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.devicesOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),"state"==t.statesTemplate.category?e("el-select",{staticStyle:{width:"120px","margin-right":"20px"},attrs:{placeholder:"Please Choose the State"},on:{change:t.statesChange},model:{value:t.statesTemplate.state,callback:function(e){t.$set(t.statesTemplate,"state",e)},expression:"statesTemplate.state"}},t._l(t.statesOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1):t._e(),e("el-select",{attrs:{placeholder:"Please Choose the Value"},model:{value:t.statesTemplate.value,callback:function(e){t.$set(t.statesTemplate,"value",e)},expression:"statesTemplate.value"}},t._l(t.valuesOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelAddState}},[t._v("Cancel")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confimAddState}},[t._v("Confirm")])],1)],1)],1)],2),e("el-col",{staticClass:"desc",attrs:{span:6}},[e("div",{staticStyle:{"font-size":"15pt",width:"50%"}},[e("div",{staticStyle:{"font-weight":"bold"}},[t._v(" Must Execute ")]),e("el-form-item",{staticClass:"symbol",attrs:{"label-width":"0",prop:"symbol"}},[e("el-select",{staticStyle:{width:"90%","margin-right":"10px","margin-top":"10%"},attrs:{placeholder:"Symbol"},model:{value:t.StateTime.symbol,callback:function(e){t.$set(t.StateTime,"symbol",e)},expression:"StateTime.symbol"}},t._l(t.symbolOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)]),e("el-col",{attrs:{span:9}},[e("div",{staticClass:"time-title",staticStyle:{"font-weight":"bold"}},[t._v(" Time ")]),e("el-form-item",{attrs:{"label-width":"0",prop:"time"}},[e("span",[e("el-input-number",{staticStyle:{width:"20%","margin-right":"5%"},attrs:{"controls-position":"right",min:1},model:{value:t.StateTime.time,callback:function(e){t.$set(t.StateTime,"time",e)},expression:"StateTime.time"}})],1),e("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"Minimum/Maximum Duration"},model:{value:t.StateTime.timeUnit,callback:function(e){t.$set(t.StateTime,"timeUnit",e)},expression:"StateTime.timeUnit"}},[e("el-option",{attrs:{label:"min",value:"min"}}),e("el-option",{attrs:{label:"hour",value:"hour"}}),e("el-option",{attrs:{label:"day",value:"day"}})],1)],1)],1)],1)],1)],1)],1)},ft=[],dt={methods:{getLocation(){const t=this;this.locationOptions=[],T.Z.get("/"+this.URL.url+"/room_list",{headers:{"Content-Type":"application/text"}}).then((e=>{for(let a=0;a<e.data.length;a++)t.locationOptions.push({value:e.data[a],label:e.data[a]})})).catch((t=>{console.log(t)}))},Confirm(){this.$refs.StateTime.validate((t=>{this.$refs.strategy.validate((e=>{if(t)if(e){if(""===this.StateTime.timeUnit)return this.$message.warning("Please fill in the form correctly!"),void(this.dialogVisible=!1);if(this.states.length<1)return this.$message.warning("Please fill in at least one state!"),void(this.dialogVisible=!1);let t="[ "+this.states[0].location+"."+this.states[0].category+"."+this.states[0].state+"."+this.states[0].value,e=this.states[0].location+"."+this.states[0].state+"."+this.states[0].value;for(let a=1;a<this.states.length;a++)t=t+" & "+this.states[a].location+"."+this.states[a].category+"."+this.states[a].state+"."+this.states[a].value,e=e+" , "+this.states[a].location+"."+this.states[a].state+"."+this.states[a].value;t=t+" ] & "+this.StateTime.symbol+" & "+this.StateTime.time+this.StateTime.timeUnit,this.$route.params.update>=0?(this.PROPERTY.property[this.$route.params.update].value=t,this.PROPERTY.property[this.$route.params.update].strategy=this.strategy.resolve,this.PROPERTY.property[this.$route.params.update].description="The duration of [ "+e+" ] must [ "+this.StateTime.symbol+" "+this.StateTime.time+this.StateTime.timeUnit+" ]"):this.PROPERTY.property.push({template:"state-time",value:t,strategy:this.strategy.resolve,description:"The duration of [ "+e+" ] must [ "+this.StateTime.symbol+" "+this.StateTime.time+this.StateTime.timeUnit+" ]"}),this.$router.back()}else this.$message.warning("Please fill in the form correctly!");else this.$message.warning("Please fill in the form correctly!"),this.dialogVisible=!1}))}))},inquiryInfor(t){const e=this;"device"===t?(this.devicesOptions=[],T.Z.get("/"+this.URL.url+"/room_device/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++){const s=t.data[a].slice(0,-3);e.devicesOptions.push({value:s,label:s})}})).catch((t=>{console.log(t)}))):"state"===t&&(this.statesOptions=[],T.Z.get("/"+this.URL.url+"/room_state/"+e.statesTemplate.location,{headers:{"Content-Type":"application/text"}}).then((t=>{for(let a=0;a<t.data.length;a++)e.statesOptions.push({value:t.data[a],label:t.data[a]})})).catch((t=>{console.log(t)})))},refresh(){this.$forceUpdate()},statesLocationChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(this.statesTemplate.category,"statesTemplate")},statesCategoryChange(t){this.statesTemplate.state=null,this.statesTemplate.value=null,this.inquiryInfor(t,"statesTemplate")},statesChange(t){this.statesTemplate.value=null,this.statesTemplate.state?this.valuesOptions=this.STATE.state[t]:this.valuesOptions=[]},updateItem(t,e){if(t&&e>=0){const a=JSON.parse(JSON.stringify(t));this.stateDialog=!0,this.statesTemplate=a,this.statesChange(this.statesTemplate.state),this.inquiryInfor(this.statesTemplate.category,"statesTemplate"),this.index=e,this.updateFlag=!0}},removeItem(t){this.states.splice(t,1),this.refresh()},addState(){this.stateDialog=!0,this.updateFlag=!1},cancelAddState(){this.stateDialog=!1,this.refresh()},confimAddState(){this.$refs.statesTemplate.validate((t=>{if(t){if(""===this.statesTemplate.value||null===this.statesTemplate.value)return void this.$message.warning("Please fill in the form correctly!");this.stateDialog=!1,this.updateFlag?this.states[this.index]=this.statesTemplate:this.states.push(this.statesTemplate),this.cancelAddState(),this.statesTemplate={category:"",state:"",value:""}}else this.$message.warning("Please fill in the form correctly!")}))}},mounted(){if(this.getLocation(),this.$route.params.update>=0){const t=this.$route.params.value.split(" & ");t[0]=t[0].substring(2),t[t.length-3]=t[t.length-3].substring(0,t[t.length-3].length-2),console.log(t),this.StateTime={symbol:t[t.length-2],time:parseInt(t[t.length-1]),timeUnit:/[^0-9]+/g.exec(t[t.length-1])[0]};for(let e=0;e<t.length-2;e++){const a=t[e].split(".");this.states.push({location:a[0],category:a[1],state:a[2],value:a[3]})}}},data(){return{states:[],statesOptions:[],devicesOptions:[],valuesOptions:[],statesTemplate:{category:"",state:"",location:"",value:""},stateDialog:!1,state_rules:{location:[{required:!0,message:"Please select the location.",trigger:"blur"}],category:[{required:!0,message:"please select the category.",trigger:"blur"}],state:[{required:!0,message:"Please select the state.",trigger:"blur"}]},resolveOptions:b,dialogVisible:!1,strategy:{resolve:""},resolve_rule:{resolve:[{required:!0,message:"please select the resolve strategy",trigger:"blur"}]},symbolOptions:v,locationOptions:[],StateTime:{symbol:"",time:"",timeUnit:""},state_time_rule:{symbol:[{required:!0,message:"please select the symbol.",trigger:"blur"}],time:[{required:!0,message:"please fill the execution time of state.",trigger:"blur"}]}}}},vt=dt,gt=(0,o.Z)(vt,mt,ft,!1,null,null,null),yt=gt.exports;s["default"].use(p.ZP);const bt=[{path:"/",name:"HomeView",component:x},{path:"/EffectEffect",name:"EffectEffect",component:E},{path:"/StateState",name:"StateState",component:q},{path:"/EventState",name:"EventState",component:Z},{path:"/EffectState",name:"EffectState",component:W},{path:"/EffectStateTime",name:"EffectStateTime",component:tt},{path:"/EffectTime",name:"EffectTime",component:ot},{path:"/EventStateTime",name:"EventStateTime",component:ut},{path:"/StateTime",name:"StateTime",component:yt}],Tt=new p.ZP({mode:"history",base:"/",routes:bt});var St=Tt,_t=a(4720),Ct=a.n(_t);s["default"].use(Ct());var xt=a(2346),wt=a(6184),Ot=a(5417),kt=a(4557),$t=a(1372),Pt={getPreConditionLTL(t){let e="";if(""!==t){const a=t.split(" ");if(3===a.length){let t="",s="";">"===a[1]?(t=a[0],s=a[2]):"<"===a[1]&&(t=a[2],s=a[0]),e="("+t+".high & "+s+".middle)|("+t+".high & "+s+".low)|("+t+".middle & "+s+".low)"}else if(5===a.length){const t=a[0],s=a[2];"2"===a[4]?e=t+".high & "+s+".low":"-2"===a[4]&&(e=t+".low & "+s+".high")}else if(7===a.length&&-1!==a.indexOf("&&")){let t="",s="";">"===a[1]?(t=a[0],s=a[2]):"<"===a[1]&&(t=a[2],s=a[0]),e="(("+t+".high & "+s+".middle)|("+t+".high & "+s+".low)|("+t+".middle & "+s+".low))","0"===a[6]?e=e+" & "+a[4]+".off":"1"===a[6]&&(e=e+" & "+a[4]+".on")}else if(11===a.length&&-1!==a.indexOf("&&")){let t="",s="";">"===a[1]?(t=a[0],s=a[2]):"<"===a[1]&&(t=a[2],s=a[0]),e="(("+t+".high & "+s+".middle)|("+t+".high & "+s+".low)|("+t+".middle & "+s+".low))","0"===a[6]?e=e+" & "+a[4]+".off":"1"===a[6]&&(e=e+" & "+a[4]+".on"),"0"===a[10]?e=e+" & "+a[8]+".off":"1"===a[10]&&(e=e+" & "+a[8]+".on")}}return e},async getLTL(t,e){let a="";const s=this;for(let l=0;l<t.length;l++)await T.Z.get("/"+e+"/effect_node/"+t[l].location+"/effect_"+t[l].effect,{headers:{"Content-Type":"application/text"}}).then((t=>{const e=t.data;let l="";for(let a=0;a<e.length;a++){let t="";const i=e[a],o=i.room+"."+i.device.substring(0,i.device.length-3)+"."+i.action.substring(7,i.action.length);t=o;const n=s.getPreConditionLTL(i.pre_condition);""!==n&&(t=t+" & ("+n+")"),""!==t&&(l=l+" | ("+t+")")}l=l.substring(3,l.length),""!==l&&(a=a+" & ("+l+")")})).catch((t=>{console.log(t)}));return a}};s["default"].prototype.$labapi="labapi",s["default"].prototype.$homeapi="homeapi",s["default"].prototype.$upload="upload",s["default"].config.productionTip=!1,s["default"].use(xt.Z,T.Z),s["default"].prototype.PROPERTY=wt,s["default"].prototype.URL=Ot,s["default"].prototype.TIME=kt,s["default"].prototype.STATE=$t,s["default"].prototype.ltlMethod=Pt,new s["default"]({router:St,render:t=>t(c)}).$mount("#app")}},e={};function a(s){var l=e[s];if(void 0!==l)return l.exports;var i=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,s,l,i){if(!s){var o=1/0;for(p=0;p<t.length;p++){s=t[p][0],l=t[p][1],i=t[p][2];for(var n=!0,r=0;r<s.length;r++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[r])}))?s.splice(r--,1):(n=!1,i<o&&(o=i));if(n){t.splice(p--,1);var c=l();void 0!==c&&(e=c)}}return e}i=i||0;for(var p=t.length;p>0&&t[p-1][2]>i;p--)t[p]=t[p-1];t[p]=[s,l,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var l,i,o=s[0],n=s[1],r=s[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(l in n)a.o(n,l)&&(a.m[l]=n[l]);if(r)var p=r(a)}for(e&&e(s);c<o.length;c++)i=o[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(p)},s=self["webpackChunksafety_ui"]=self["webpackChunksafety_ui"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(3951)}));s=a.O(s)})();
//# sourceMappingURL=app.b1f54395.js.map